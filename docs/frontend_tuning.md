# 🎨 Frontend & UX Performance Tuning

본 문서는 **KTB Chat** 프로젝트의 프론트엔드 영역에서 대량의 실시간 데이터를 처리하며 발생한 렌더링 이슈와 UX 저하 문제를 해결한 기록입니다.

---

## 1. 렌더링 성능 최적화 (Rendering Performance)

### 🔴 Problem: 과도한 리렌더링 및 UI 버벅임
채팅방에 메시지가 빠르게 유입될 때마다 전체 컴포넌트가 리렌더링되어 UI가 버벅이거나 입력창이 멈추는(Freezing) 현상이 발생했습니다.

### 🟢 Action: 메모이제이션 및 배치 처리
1.  **React.memo & useCallback:**
    * 메시지 리스트 아이템 등 반복되는 컴포넌트에 `React.memo`를 적용하고, 핸들러 함수를 `useCallback`으로 감싸 불필요한 리렌더링을 차단했습니다.
2.  **이벤트 일괄 처리 (Batching):**
    * WebSocket으로 들어오는 메시지를 즉시 State에 반영하지 않고, **큐(Queue)**에 모았다가 일정 주기(예: 100ms)마다 일괄 업데이트하여 렌더링 횟수를 획기적으로 줄였습니다.
3.  **상태 관리 구조 개선:**
    * 빈번하게 변하는 입력값 등은 `useRef`를 활용하거나 상태 관리 로직을 `useReducer`로 분리하여 컴포넌트의 부하를 경량화했습니다.

---

## 2. 네트워크 및 리소스 최적화 (Network Efficiency)

### 🔴 Problem: 고해상도 이미지 트래픽
유저가 스마트폰으로 촬영한 고해상도(4K 이상) 사진을 그대로 업로드하여 서버 대역폭을 낭비하고, 채팅방 로딩 속도를 저하시켰습니다.

### 🟢 Action: 클라이언트 사이드 이미지 압축
1.  **이미지 리사이징 & WebP 변환:**
    * 이미지 업로드 전, 브라우저 단에서 `browser-image-compression` 라이브러리를 활용해 해상도를 조정하고 **WebP 포맷**으로 압축했습니다.
    * 결과적으로 평균 5MB였던 이미지 용량을 **50KB 수준(약 99% 감소)**으로 줄여 전송 속도를 비약적으로 높였습니다.

---

## 3. 사용자 경험 및 연결 안정성 (UX & Stability)

### 🔴 Problem: 불안정한 네트워크 연결
모바일 환경 등 네트워크가 불안정한 상황에서 소켓 재연결 시도가 빈번하게 발생하여 서버에 과부하를 주고, 유저는 깜빡이는 화면을 보게 되었습니다.

### 🟢 Action: 연결 로직 고도화
1.  **Debounce 적용:**
    * 재연결(Reconnection) 로직에 **Debounce**를 적용하여, 네트워크가 잠시 끊겼다 붙을 때 과도한 재연결 요청이 서버로 쏟아지는 것을 방지했습니다.
2.  **Optimistic UI (낙관적 업데이트):**
    * 메시지 전송 시 서버 응답을 기다리지 않고 UI에 먼저 표시(낙관적 업데이트)하여, 유저가 느끼는 체감 지연 시간을 0에 가깝게 만들었습니다.